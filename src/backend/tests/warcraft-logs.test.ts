import test from 'node:test';
import assert from 'node:assert';
import { setupServer } from 'msw/node';
import gnarlroot from '../mocks/blizzard/gnarlroot';
import { findLogsForHealComp, HealerComp, loadBossAbilityDamage, loadRaidCDData, parsePhasesForEncounter, toFilterString } from '../warcraft-logs';
import healCompLogs from '../mocks/wcl/heal-comp-logs';
import raidCDUsages from '../mocks/wcl/raid-cd-usages';
import bossAbilityDamageEvents from '../mocks/wcl/boss-ability-damage-events';

let server = setupServer();
let apiCalls = [];

const listener = ({ request }: { request: any }) => {
    apiCalls.push(request);
};

test.beforeEach(function () {
    apiCalls = [];
    server.events.removeListener('request:start', listener)
    server.events.on('request:start', listener)
    server.listen();
    server.resetHandlers();
});

test.describe('function: parsePhasesForEncounter', () => {
    test('works', async () => {
        const result = parsePhasesForEncounter(gnarlroot);
        assert.deepEqual(
            result,
            [
                {
                    "title": "Stage One: Garden of Despair",
                    "spells": [{ "id": 421898, "name": "Flaming Pestilence" }, { "id": 421971, "name": "Controlled Burn" }, { "id": 421986, "name": "Tainted Bloom" }, { "id": 422023, "name": "Shadow-Scorched Earth" }, { "id": 422026, "name": "Tortured Scream" }, { "id": 422039, "name": "Shadowflame Cleave" }, { "id": 422053, "name": "Shadow Spines" }, { "id": 424352, "name": "Dreadfire Barrage" }, { "id": 425816, "name": "Blazing Pollen" }, { "id": 425819, "name": "Flaming Sap" }, { "id": 428992, "name": "Vicious Thicket" }, { "id": 429009, "name": "Overgrown" }]
                },
                {
                    "title": "Stage Two: Agonizing Growth",
                    "spells": [{ "id": 421013, "name": "Doom Cultivation" }, { "id": 421038, "name": "Ember-Charred" }, { "id": 421350, "name": "Splintering Charcoal" }, { "id": 421840, "name": "Uprooted Agony" }, { "id": 422373, "name": "Toxic Loam" }, { "id": 425648, "name": "Doom Roots" }, { "id": 425709, "name": "Rising Mania" }, { "id": 426548, "name": "Searing Bramble" }]
                }
            ]
        );
    });
});

test.describe('function: toFilterString', () => {
    test('works', () => {
        const healComp: HealerComp = [
            { 'class': 'Paladin', 'spec': 'Holy', count: 1 },
            { 'class': 'Druid', 'spec': 'Restoration', count: 1 },
            { 'class': 'Monk', 'spec': 'Mistweaver', count: 1 },
            { 'class': 'Evoker', 'spec': 'Preservation', count: 1 },
        ]
        const result = toFilterString(healComp);
        assert.deepEqual(result, "2.4.1,5.2.1,6.1.1,13.2.1");
    });
});

test.describe('function: findLogsForHealComp', () => {
    test('with mock data', async () => {
        process.env.WARCRAFT_LOGS_API_V1_KEY = 'MOCK_API_KEY';
        const gnarlroot = 2820;
        const healComp: HealerComp = [
            { 'class': 'Paladin', 'spec': 'Holy', count: 1 },
            { 'class': 'Druid', 'spec': 'Restoration', count: 1 },
            { 'class': 'Monk', 'spec': 'Mistweaver', count: 1 },
            { 'class': 'Evoker', 'spec': 'Preservation', count: 1 },
        ];

        server.use(...healCompLogs)
        const result = await findLogsForHealComp(gnarlroot, healComp);
        assert.deepEqual(result,
            {
                "error": null,
                "result": [
                    { "reportID": "jxqQD3wt1yXfk6zH", "itemLevel": 478.75, "fightID": 38, "duration": 229070, "url": "https://www.warcraftlogs.com/reports/jxqQD3wt1yXfk6zH#fight=38" },
                    { "reportID": "GHW1Tg7X3FaAP8vt", "itemLevel": 479.05, "fightID": 7, "duration": 273991, "url": "https://www.warcraftlogs.com/reports/GHW1Tg7X3FaAP8vt#fight=7" },
                    { "reportID": "BKCyL1D4whXVn7Ff", "itemLevel": 476.15, "fightID": 50, "duration": 292136, "url": "https://www.warcraftlogs.com/reports/BKCyL1D4whXVn7Ff#fight=50" },
                    { "reportID": "Cbv2t4ZjqAzr8m7D", "itemLevel": 475.8, "fightID": 46, "duration": 286829, "url": "https://www.warcraftlogs.com/reports/Cbv2t4ZjqAzr8m7D#fight=46" },
                    { "reportID": "Jhkw7N3XfqD249ZP", "itemLevel": 479.5, "fightID": 46, "duration": 293455, "url": "https://www.warcraftlogs.com/reports/Jhkw7N3XfqD249ZP#fight=46" },
                    { "reportID": "XJcmG1L8pTq2adQk", "itemLevel": 479.9, "fightID": 4, "duration": 282410, "url": "https://www.warcraftlogs.com/reports/XJcmG1L8pTq2adQk#fight=4" },
                    { "reportID": "9mzGCNwvQpDXdxFK", "itemLevel": 473.8, "fightID": 15, "duration": 348212, "url": "https://www.warcraftlogs.com/reports/9mzGCNwvQpDXdxFK#fight=15" },
                    { "reportID": "aV4Pt8hGb397r6ZW", "itemLevel": 472.75, "fightID": 33, "duration": 307447, "url": "https://www.warcraftlogs.com/reports/aV4Pt8hGb397r6ZW#fight=33" },
                    { "reportID": "v8yBWfYJCK7jhzLN", "itemLevel": 470.55, "fightID": 8, "duration": 309066, "url": "https://www.warcraftlogs.com/reports/v8yBWfYJCK7jhzLN#fight=8" },
                    { "reportID": "pgP2fyv6xWwCt83K", "itemLevel": 466.5, "fightID": 32, "duration": 315487, "url": "https://www.warcraftlogs.com/reports/pgP2fyv6xWwCt83K#fight=32" }]
            })
    });
});

test.describe('function: loadRaidCDData', () => {
    test('with mocks', async () => {
        process.env.WARCRAFT_LOGS_API_V2_ACCESS_TOKEN = 'MOCK_ACCESS_TOKEN';
        server.use(...raidCDUsages)
        const result = await loadRaidCDData("Yb7Gpkh4A2Z8vR9T", 5);
        assert.deepEqual(result,
            {
                "error": null,
                "result": [
                    { "name": "Willywankers", "class": "Death Knight", "spec": "Unholy", "casts": [{ "ability": 51052, "timestamp": 1468406 }, { "ability": 51052, "timestamp": 1606639 }] },
                    { "name": "Kurzok", "class": "Death Knight", "spec": "Frost", "casts": [{ "ability": 51052, "timestamp": 1395936 }, { "ability": 51052, "timestamp": 1532854 }, { "ability": 51052, "timestamp": 1675472 }] },
                    { "name": "Meepeadeep", "class": "Demon Hunter", "spec": "Havoc", "casts": [{ "ability": 196718, "timestamp": 1676113 }] },
                    { "name": "Sojutime", "class": "Monk", "spec": "Mistweaver", "casts": [{ "ability": 115310, "timestamp": 1439726 }, { "ability": 115310, "timestamp": 1710824 }] },
                    { "name": "Zelfyre", "class": "Evoker", "spec": "Preservation", "casts": [{ "ability": 359816, "timestamp": 1388512 }, { "ability": 363534, "timestamp": 1447375 }, { "ability": 359816, "timestamp": 1537898 }, { "ability": 359816, "timestamp": 1745779 }] },
                    { "name": "Hodgypodgy", "class": "Druid", "spec": "Restoration", "casts": [{ "ability": 124974, "timestamp": 1353504 }, { "ability": 740, "timestamp": 1435641 }, { "ability": 124974, "timestamp": 1442630 }, { "ability": 124974, "timestamp": 1570270 }, { "ability": 124974, "timestamp": 1701472 }, { "ability": 740, "timestamp": 1739203 }] },
                    { "name": "Niinetails", "class": "Paladin", "spec": "Holy", "casts": [{ "ability": 31821, "timestamp": 1432653 }, { "ability": 31821, "timestamp": 1613023 }] },
                    { "name": "Goldlust", "class": "Demon Hunter", "spec": "Vengeance", "casts": [{ "ability": 196718, "timestamp": 1435927 }, { "ability": 196718, "timestamp": 1731135 }] }]
            }
        )
    });
});

test.describe('function: loadBossAbilityDamage', () => {
    test('with mocks', async () => {
        process.env.WARCRAFT_LOGS_API_V2_ACCESS_TOKEN = 'MOCK_ACCESS_TOKEN';
        server.use(...bossAbilityDamageEvents)
        const result = await loadBossAbilityDamage("Yb7Gpkh4A2Z8vR9T", 5, [426150, 418533, 416056, 422776]);
        assert.deepEqual(result,
            {
                "error": null,
                "result": [
                    { "ability": 422776, "damage": 561013, "timestamp": 1380997, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1380997, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1380997, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1380997, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1380997, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1380997, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1380998, "tick": false }, { "ability": 422776, "damage": 531486, "timestamp": 1380998, "tick": false }, { "ability": 422776, "damage": 476861, "timestamp": 1380998, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1380998, "tick": false }, { "ability": 422776, "damage": 471251, "timestamp": 1380998, "tick": false }, { "ability": 422776, "damage": 476861, "timestamp": 1380999, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1380999, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1380999, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1380999, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1381000, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1381000, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1381000, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1381000, "tick": false }, { "ability": 422776, "damage": 561013, "timestamp": 1381000, "tick": false }, { "ability": 426150, "damage": 263733, "timestamp": 1388952, "tick": false }, { "ability": 426150, "damage": 251303, "timestamp": 1388952, "tick": false }, { "ability": 426150, "damage": 258189, "timestamp": 1388953, "tick": false }, { "ability": 426150, "damage": 262192, "timestamp": 1388953, "tick": false }, { "ability": 426150, "damage": 269351, "timestamp": 1388953, "tick": false }, { "ability": 426150, "damage": 258364, "timestamp": 1388953, "tick": false }, { "ability": 426150, "damage": 267774, "timestamp": 1388953, "tick": false }, { "ability": 426150, "damage": 262519, "timestamp": 1388953, "tick": false }, { "ability": 426150, "damage": 253329, "timestamp": 1388954, "tick": false }, { "ability": 426150, "damage": 270192, "timestamp": 1388954, "tick": false }, { "ability": 426150, "damage": 271008, "timestamp": 1388954, "tick": false }, { "ability": 426150, "damage": 271151, "timestamp": 1388954, "tick": false }, { "ability": 426150, "damage": 256875, "timestamp": 1388954, "tick": false }, { "ability": 426150, "damage": 213768, "timestamp": 1388954, "tick": false }, { "ability": 426150, "damage": 255547, "timestamp": 1388954, "tick": false }, { "ability": 426150, "damage": 256750, "timestamp": 1388954, "tick": false }, { "ability": 426150, "damage": 257602, "timestamp": 1388955, "tick": false }, { "ability": 426150, "damage": 252781, "timestamp": 1388955, "tick": false }, { "ability": 426150, "damage": 274413, "timestamp": 1388955, "tick": false }, { "ability": 426150, "damage": 189390, "timestamp": 1388955, "tick": false }, { "ability": 426150, "damage": 255275, "timestamp": 1391559, "tick": false }, { "ability": 426150, "damage": 255583, "timestamp": 1391559, "tick": false }, { "ability": 426150, "damage": 251909, "timestamp": 1391559, "tick": false }, { "ability": 426150, "damage": 265935, "timestamp": 1391560, "tick": false }, { "ability": 426150, "damage": 263513, "timestamp": 1391560, "tick": false }, { "ability": 426150, "damage": 191477, "timestamp": 1391560, "tick": false }, { "ability": 426150, "damage": 259187, "timestamp": 1391560, "tick": false }, { "ability": 426150, "damage": 275218, "timestamp": 1391560, "tick": false }, { "ability": 426150, "damage": 257505, "timestamp": 1391560, "tick": false }, { "ability": 426150, "damage": 263969, "timestamp": 1391560, "tick": false }, { "ability": 426150, "damage": 260987, "timestamp": 1391561, "tick": false }, { "ability": 426150, "damage": 268949, "timestamp": 1391561, "tick": false }, { "ability": 426150, "damage": 265055, "timestamp": 1391561, "tick": false }, { "ability": 426150, "damage": 257857, "timestamp": 1391561, "tick": false }, { "ability": 426150, "damage": 251905, "timestamp": 1391561, "tick": false }, { "ability": 426150, "damage": 261744, "timestamp": 1391561, "tick": false }, { "ability": 426150, "damage": 267468, "timestamp": 1391561, "tick": false }, { "ability": 426150, "damage": 253358, "timestamp": 1391561, "tick": false }, { "ability": 426150, "damage": 260639, "timestamp": 1391561, "tick": false }, { "ability": 426150, "damage": 258103, "timestamp": 1391561, "tick": false }, { "ability": 426150, "damage": 282148, "timestamp": 1394155, "tick": false }, { "ability": 426150, "damage": 288047, "timestamp": 1394155, "tick": false }, { "ability": 426150, "damage": 268913, "timestamp": 1394164, "tick": false }, { "ability": 426150, "damage": 273425, "timestamp": 1394164, "tick": false }, { "ability": 426150, "damage": 261226, "timestamp": 1394164, "tick": false }, { "ability": 426150, "damage": 274113, "timestamp": 1394164, "tick": false }, { "ability": 426150, "damage": 285705, "timestamp": 1394164, "tick": false }, { "ability": 426150, "damage": 273749, "timestamp": 1394164, "tick": false }, { "ability": 426150, "damage": 273685, "timestamp": 1394164, "tick": false }, { "ability": 426150, "damage": 265944, "timestamp": 1394164, "tick": false }, { "ability": 426150, "damage": 278878, "timestamp": 1394164, "tick": false }, { "ability": 426150, "damage": 241801, "timestamp": 1394164, "tick": false }, { "ability": 426150, "damage": 261572, "timestamp": 1394164, "tick": false }, { "ability": 426150, "damage": 282310, "timestamp": 1394164, "tick": false }, { "ability": 426150, "damage": 278313, "timestamp": 1394165, "tick": false }, { "ability": 426150, "damage": 284951, "timestamp": 1394165, "tick": false }, { "ability": 426150, "damage": 261497, "timestamp": 1394165, "tick": false }, { "ability": 426150, "damage": 282715, "timestamp": 1394165, "tick": false }, { "ability": 426150, "damage": 274051, "timestamp": 1394165, "tick": false }, { "ability": 426150, "damage": 257248, "timestamp": 1394165, "tick": false }, { "ability": 426150, "damage": 277015, "timestamp": 1396769, "tick": false }, { "ability": 426150, "damage": 263909, "timestamp": 1396769, "tick": false }, { "ability": 426150, "damage": 270433, "timestamp": 1396779, "tick": false }, { "ability": 426150, "damage": 268029, "timestamp": 1396779, "tick": false }, { "ability": 426150, "damage": 266924, "timestamp": 1396779, "tick": false }, { "ability": 426150, "damage": 275358, "timestamp": 1396779, "tick": false }, { "ability": 426150, "damage": 283644, "timestamp": 1396779, "tick": false }, { "ability": 426150, "damage": 283613, "timestamp": 1396779, "tick": false }, { "ability": 426150, "damage": 286189, "timestamp": 1396779, "tick": false }, { "ability": 426150, "damage": 263710, "timestamp": 1396780, "tick": false }, { "ability": 426150, "damage": 262848, "timestamp": 1396780, "tick": false }, { "ability": 426150, "damage": 285270, "timestamp": 1396780, "tick": false }, { "ability": 426150, "damage": 284621, "timestamp": 1396780, "tick": false }, { "ability": 426150, "damage": 280886, "timestamp": 1396780, "tick": false }, { "ability": 426150, "damage": 283118, "timestamp": 1396780, "tick": false }, { "ability": 426150, "damage": 264990, "timestamp": 1396781, "tick": false }, { "ability": 426150, "damage": 235867, "timestamp": 1396781, "tick": false }, { "ability": 426150, "damage": 280395, "timestamp": 1396781, "tick": false }, { "ability": 426150, "damage": 274946, "timestamp": 1396781, "tick": false }, { "ability": 426150, "damage": 269306, "timestamp": 1396781, "tick": false }, { "ability": 426150, "damage": 269910, "timestamp": 1399378, "tick": false }, { "ability": 426150, "damage": 273805, "timestamp": 1399378, "tick": false }, { "ability": 426150, "damage": 273022, "timestamp": 1399378, "tick": false }, { "ability": 426150, "damage": 272537, "timestamp": 1399378, "tick": false }, { "ability": 426150, "damage": 269054, "timestamp": 1399378, "tick": false }, { "ability": 426150, "damage": 280623, "timestamp": 1399378, "tick": false }, { "ability": 426150, "damage": 276721, "timestamp": 1399378, "tick": false }, { "ability": 426150, "damage": 284232, "timestamp": 1399379, "tick": false }, { "ability": 426150, "damage": 280655, "timestamp": 1399379, "tick": false }, { "ability": 426150, "damage": 264721, "timestamp": 1399379, "tick": false }, { "ability": 426150, "damage": 273007, "timestamp": 1399379, "tick": false }, { "ability": 426150, "damage": 269811, "timestamp": 1399379, "tick": false }, { "ability": 426150, "damage": 262983, "timestamp": 1399380, "tick": false }, { "ability": 426150, "damage": 268094, "timestamp": 1399380, "tick": false }, { "ability": 426150, "damage": 199780, "timestamp": 1399380, "tick": false }, { "ability": 426150, "damage": 277757, "timestamp": 1399380, "tick": false }, { "ability": 426150, "damage": 261056, "timestamp": 1399381, "tick": false }, { "ability": 426150, "damage": 261170, "timestamp": 1399381, "tick": false }, { "ability": 426150, "damage": 266530, "timestamp": 1399381, "tick": false }, { "ability": 426150, "damage": 273160, "timestamp": 1399381, "tick": false }, { "ability": 426150, "damage": 255186, "timestamp": 1401955, "tick": false }, { "ability": 426150, "damage": 263458, "timestamp": 1401955, "tick": false }, { "ability": 426150, "damage": 261457, "timestamp": 1401955, "tick": false }, { "ability": 426150, "damage": 264530, "timestamp": 1401956, "tick": false }, { "ability": 426150, "damage": 260809, "timestamp": 1401956, "tick": false }, { "ability": 426150, "damage": 258703, "timestamp": 1401957, "tick": false }, { "ability": 426150, "damage": 266698, "timestamp": 1401957, "tick": false }, { "ability": 426150, "damage": 274368, "timestamp": 1401958, "tick": false }, { "ability": 426150, "damage": 271562, "timestamp": 1401958, "tick": false }, { "ability": 426150, "damage": 252671, "timestamp": 1401958, "tick": false }, { "ability": 426150, "damage": 260440, "timestamp": 1401958, "tick": false }, { "ability": 426150, "damage": 265285, "timestamp": 1401958, "tick": false }, { "ability": 426150, "damage": 259922, "timestamp": 1401958, "tick": false }, { "ability": 426150, "damage": 195825, "timestamp": 1401959, "tick": false }, { "ability": 426150, "damage": 264681, "timestamp": 1401959, "tick": false }, { "ability": 426150, "damage": 251594, "timestamp": 1401959, "tick": false }, { "ability": 426150, "damage": 254705, "timestamp": 1401959, "tick": false }, { "ability": 426150, "damage": 255380, "timestamp": 1401959, "tick": false }, { "ability": 426150, "damage": 259134, "timestamp": 1401959, "tick": false }, { "ability": 426150, "damage": 266333, "timestamp": 1401959, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438510, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438511, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438511, "tick": false }, { "ability": 416056, "damage": 363286, "timestamp": 1438511, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438511, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438511, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438511, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438512, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438512, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438512, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438512, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438512, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438513, "tick": false }, { "ability": 416056, "damage": 454107, "timestamp": 1438513, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438513, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438513, "tick": false }, { "ability": 416056, "damage": 506127, "timestamp": 1438514, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438514, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438514, "tick": false }, { "ability": 416056, "damage": 534244, "timestamp": 1438514, "tick": false }, { "ability": 416056, "damage": 0, "timestamp": 1471304, "tick": false }, { "ability": 416056, "damage": 0, "timestamp": 1471304, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471313, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471313, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471313, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471313, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471314, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471314, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471314, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471314, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471315, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471316, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471316, "tick": false }, { "ability": 416056, "damage": 596327, "timestamp": 1471344, "tick": false }, { "ability": 416056, "damage": 478386, "timestamp": 1471345, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471345, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471345, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471346, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471346, "tick": false }, { "ability": 416056, "damage": 629456, "timestamp": 1471347, "tick": false }, { "ability": 422776, "damage": 584635, "timestamp": 1525210, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525210, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525210, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525210, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525211, "tick": false }, { "ability": 422776, "damage": 493691, "timestamp": 1525211, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525211, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525211, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525211, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525211, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525211, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525211, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525212, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525212, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525212, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525212, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525213, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525213, "tick": false }, { "ability": 422776, "damage": 617114, "timestamp": 1525213, "tick": false }, { "ability": 422776, "damage": 524547, "timestamp": 1525214, "tick": false }, { "ability": 426150, "damage": 297782, "timestamp": 1532460, "tick": false }, { "ability": 426150, "damage": 282003, "timestamp": 1532460, "tick": false }, { "ability": 426150, "damage": 293890, "timestamp": 1532460, "tick": false }, { "ability": 426150, "damage": 302687, "timestamp": 1532460, "tick": false }, { "ability": 426150, "damage": 287766, "timestamp": 1532460, "tick": false }, { "ability": 426150, "damage": 300670, "timestamp": 1532460, "tick": false }, { "ability": 426150, "damage": 297217, "timestamp": 1532461, "tick": false }, { "ability": 426150, "damage": 298592, "timestamp": 1532461, "tick": false }, { "ability": 426150, "damage": 284045, "timestamp": 1532461, "tick": false }, { "ability": 426150, "damage": 275792, "timestamp": 1532461, "tick": false }, { "ability": 426150, "damage": 302062, "timestamp": 1532461, "tick": false }, { "ability": 426150, "damage": 295066, "timestamp": 1532461, "tick": false }, { "ability": 426150, "damage": 278382, "timestamp": 1532461, "tick": false }, { "ability": 426150, "damage": 284325, "timestamp": 1532462, "tick": false }, { "ability": 426150, "damage": 279494, "timestamp": 1532462, "tick": false }, { "ability": 426150, "damage": 297564, "timestamp": 1532462, "tick": false }, { "ability": 426150, "damage": 292262, "timestamp": 1532462, "tick": false }, { "ability": 426150, "damage": 280421, "timestamp": 1532462, "tick": false }, { "ability": 426150, "damage": 300795, "timestamp": 1532462, "tick": false }, { "ability": 426150, "damage": 213343, "timestamp": 1532462, "tick": false }, { "ability": 426150, "damage": 289796, "timestamp": 1535060, "tick": false }, { "ability": 426150, "damage": 301972, "timestamp": 1535061, "tick": false }, { "ability": 426150, "damage": 277618, "timestamp": 1535061, "tick": false }, { "ability": 426150, "damage": 292680, "timestamp": 1535061, "tick": false }, { "ability": 426150, "damage": 299016, "timestamp": 1535061, "tick": false }, { "ability": 426150, "damage": 298384, "timestamp": 1535061, "tick": false }, { "ability": 426150, "damage": 291823, "timestamp": 1535061, "tick": false }, { "ability": 426150, "damage": 280262, "timestamp": 1535061, "tick": false }, { "ability": 426150, "damage": 279426, "timestamp": 1535062, "tick": false }, { "ability": 426150, "damage": 289752, "timestamp": 1535062, "tick": false }, { "ability": 426150, "damage": 297586, "timestamp": 1535062, "tick": false }, { "ability": 426150, "damage": 297141, "timestamp": 1535062, "tick": false }, { "ability": 426150, "damage": 285707, "timestamp": 1535063, "tick": false }, { "ability": 426150, "damage": 301659, "timestamp": 1535063, "tick": false }, { "ability": 426150, "damage": 280675, "timestamp": 1535063, "tick": false }, { "ability": 426150, "damage": 296595, "timestamp": 1535063, "tick": false }, { "ability": 426150, "damage": 197809, "timestamp": 1535063, "tick": false }, { "ability": 426150, "damage": 280545, "timestamp": 1535063, "tick": false }, { "ability": 426150, "damage": 299361, "timestamp": 1535063, "tick": false }, { "ability": 426150, "damage": 300346, "timestamp": 1535063, "tick": false }, { "ability": 426150, "damage": 287863, "timestamp": 1537667, "tick": false }, { "ability": 426150, "damage": 276861, "timestamp": 1537667, "tick": false }, { "ability": 426150, "damage": 286901, "timestamp": 1537667, "tick": false }, { "ability": 426150, "damage": 301541, "timestamp": 1537667, "tick": false }, { "ability": 426150, "damage": 287930, "timestamp": 1537668, "tick": false }, { "ability": 426150, "damage": 288883, "timestamp": 1537668, "tick": false }, { "ability": 426150, "damage": 280536, "timestamp": 1537668, "tick": false }, { "ability": 426150, "damage": 289699, "timestamp": 1537668, "tick": false }, { "ability": 426150, "damage": 283383, "timestamp": 1537668, "tick": false }, { "ability": 426150, "damage": 279311, "timestamp": 1537669, "tick": false }, { "ability": 426150, "damage": 164514, "timestamp": 1537669, "tick": false }, { "ability": 426150, "damage": 290064, "timestamp": 1537669, "tick": false }, { "ability": 426150, "damage": 296106, "timestamp": 1537669, "tick": false }, { "ability": 426150, "damage": 297428, "timestamp": 1537669, "tick": false }, { "ability": 426150, "damage": 285734, "timestamp": 1537677, "tick": false }, { "ability": 426150, "damage": 293247, "timestamp": 1537677, "tick": false }, { "ability": 426150, "damage": 267404, "timestamp": 1537678, "tick": false }, { "ability": 426150, "damage": 292206, "timestamp": 1537678, "tick": false }, { "ability": 426150, "damage": 295573, "timestamp": 1537679, "tick": false }, { "ability": 426150, "damage": 292234, "timestamp": 1537679, "tick": false }, { "ability": 426150, "damage": 281373, "timestamp": 1540269, "tick": false }, { "ability": 426150, "damage": 296914, "timestamp": 1540270, "tick": false }, { "ability": 426150, "damage": 277566, "timestamp": 1540270, "tick": false }, { "ability": 426150, "damage": 302188, "timestamp": 1540270, "tick": false }, { "ability": 426150, "damage": 289431, "timestamp": 1540270, "tick": false }, { "ability": 426150, "damage": 294304, "timestamp": 1540271, "tick": false }, { "ability": 426150, "damage": 301057, "timestamp": 1540271, "tick": false }, { "ability": 426150, "damage": 301765, "timestamp": 1540271, "tick": false }, { "ability": 426150, "damage": 295683, "timestamp": 1540272, "tick": false }, { "ability": 426150, "damage": 298410, "timestamp": 1540272, "tick": false }, { "ability": 426150, "damage": 286747, "timestamp": 1540272, "tick": false }, { "ability": 426150, "damage": 279190, "timestamp": 1540272, "tick": false }, { "ability": 426150, "damage": 282979, "timestamp": 1540272, "tick": false }, { "ability": 426150, "damage": 299827, "timestamp": 1540272, "tick": false }, { "ability": 426150, "damage": 186168, "timestamp": 1540272, "tick": false }, { "ability": 426150, "damage": 292307, "timestamp": 1540272, "tick": false }, { "ability": 426150, "damage": 271053, "timestamp": 1540272, "tick": false }, { "ability": 426150, "damage": 275656, "timestamp": 1540272, "tick": false }, { "ability": 426150, "damage": 278315, "timestamp": 1540273, "tick": false }, { "ability": 426150, "damage": 279261, "timestamp": 1540273, "tick": false }, { "ability": 426150, "damage": 296493, "timestamp": 1542866, "tick": false }, { "ability": 426150, "damage": 288280, "timestamp": 1542866, "tick": false }, { "ability": 426150, "damage": 295498, "timestamp": 1542866, "tick": false }, { "ability": 426150, "damage": 289809, "timestamp": 1542866, "tick": false }, { "ability": 426150, "damage": 276125, "timestamp": 1542866, "tick": false }, { "ability": 426150, "damage": 286798, "timestamp": 1542866, "tick": false }, { "ability": 426150, "damage": 301538, "timestamp": 1542866, "tick": false }, { "ability": 426150, "damage": 277065, "timestamp": 1542866, "tick": false }, { "ability": 426150, "damage": 274919, "timestamp": 1542866, "tick": false }, { "ability": 426150, "damage": 278400, "timestamp": 1542866, "tick": false }, { "ability": 426150, "damage": 282705, "timestamp": 1542867, "tick": false }, { "ability": 426150, "damage": 203669, "timestamp": 1542867, "tick": false }, { "ability": 426150, "damage": 276158, "timestamp": 1542867, "tick": false }, { "ability": 426150, "damage": 285291, "timestamp": 1542867, "tick": false }, { "ability": 426150, "damage": 290984, "timestamp": 1542867, "tick": false }, { "ability": 426150, "damage": 287453, "timestamp": 1542867, "tick": false }, { "ability": 426150, "damage": 284075, "timestamp": 1542868, "tick": false }, { "ability": 426150, "damage": 300786, "timestamp": 1542868, "tick": false }, { "ability": 426150, "damage": 279356, "timestamp": 1542868, "tick": false }, { "ability": 426150, "damage": 246555, "timestamp": 1542868, "tick": false }
                ]
            }
        )
    });
});

